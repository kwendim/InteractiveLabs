<html>
    <head>
        {% load static %}
        <link rel="stylesheet" href=" {% static 'labs/style.css' %}" />
        <link rel="stylesheet" href="https://unpkg.com/xterm@4.4.0/css/xterm.css" />
        <script src="https://unpkg.com/xterm@4.4.0/lib/xterm.js"></script>
        <script src="https://unpkg.com/xterm-addon-attach@0.5.0/lib/xterm-addon-attach.js" ></script>


        <title>interactiveLabs</title>
    </head>
    <body>
        <h1 style="color: #2D2E2C">CNIL: Ultimate learning <em style="color: #5DA5D5">tool</em></h1>

        <div class="row">
          <div class="column left" style="background-color:aqua;">
              <h2>Steps</h2>
              <p>you want to do some stuff? Let's get to it</p>                
          </div>
          <div class="column right">
            <div id="terminal"></div>
   

          </div>
      </div> 
        <script>
          var lab_id = "{{lab_id}}";
          var chatSocket = new WebSocket('ws://' + window.location.host + '/ws/labs/' + lab_id + '/');

              // chatSocket.onmessage = function(e) {
              //     var data = JSON.parse(e.data);
              //     var message = data['message'];
              //     console.log("received: " + message);

              // };

            //   chatSocket.onclose = function(e) {
            //       console.error('Chat socket closed unexpectedly');
            //   };

            const term = new Terminal({
                cursorBlink: true,
                macOptionIsMeta: true,
                scrollback: true,
            });
            const attachAddon = new AttachAddon.AttachAddon(chatSocket);
            term.loadAddon(attachAddon)
    
            term.open(document.getElementById('terminal'));

            term.write("Welcome to cloud native interactive Labs\n")

            
            // term.onData(onkeypressed);
            
            // function onkeypressed(key) {
            //   chatSocket.send(JSON.stringify({
            //           'message': key.toString() + " was pressed"
            //   }));
            // }
      </script>
   </body>
</html>
